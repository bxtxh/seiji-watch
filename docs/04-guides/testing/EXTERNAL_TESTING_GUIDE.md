# External User Testing Guide
## Diet Issue Tracker - Comprehensive Testing Program

### 🎯 **概要**

本ガイドは、Diet Issue Tracker の外部関係者による共同手動テストプログラムの実施要領です。政治専門家、アクセシビリティ専門家、一般ユーザー代表、法務専門家との協力により、MVP Launch前の包括的な品質保証を行います。

---

## 📋 **テスト実施体制**

### **参加者と役割**

| 専門分野 | 人数 | 主要責任 |
|---------|------|----------|
| **政治専門家・ジャーナリスト** | 2-3名 | データ正確性・中立性検証、国会情報の妥当性確認 |
| **アクセシビリティ専門家** | 1-2名 | WCAG 2.1 AA準拠確認、障害者対応評価 |
| **一般ユーザー代表** | 3-4名 | 使いやすさ・理解しやすさ評価、直感的操作性 |
| **法務・コンプライアンス専門家** | 1-2名 | 選挙法・著作権法遵守確認、プライバシー評価 |

### **実施スケジュール**
- **準備期間**: 1週間（環境構築・ドキュメント準備）
- **テスト期間**: 2週間（6フェーズ実施）
- **修正期間**: 3日間（Critical問題対応）

---

## 🏗️ **テスト環境**

### **ステージング環境仕様**
- **URL**: `https://staging-test.diet-issue-tracker.jp`
- **API**: `https://api-gateway-staging-external-test-[PROJECT].a.run.app`
- **Infrastructure**: GCP Cloud Run + Cloud SQL + Cloud Storage
- **Resources**: 2 vCPU, 2GB RAM, 100GB storage
- **Capacity**: 最大50インスタンス、1000同時ユーザー対応

### **テストデータ**
- **第217回国会データ完全セット**（2024-2025）
- **法案データ**: ~200件の完全な法案情報
- **議員データ**: 衆参両院議員~700名の最新情報
- **議事録データ**: 主要委員会議事録~50時間分
- **分類データ**: CAP 3層分類（L1:25, L2:200, L3:500）

---

## 📊 **テストフェーズ詳細**

### **Phase 1: システム基盤検証**（2日間）
**参加者**: 管理者テスター + 政治専門家

#### **テスト項目**
- [ ] **認証システム**: JWT・Google OAuth・権限管理
- [ ] **API Gateway**: レート制限・CORS・セキュリティヘッダー
- [ ] **マイクロサービス連携**: api_gateway ⟷ ingest-worker データフロー
- [ ] **データベース**: PostgreSQL接続・バックアップ・復旧
- [ ] **外部サービス**: Airtable・Weaviate・Cloud Storage連携

#### **成功基準**
- 全API エンドポイントが正常応答（200/201/204）
- 認証フローが完全動作（ログイン・権限確認・トークン更新）
- データベースクエリが期待通りの結果を返す

---

### **Phase 2: データ品質・正確性検証**（3日間）
**参加者**: 政治専門家 + ジャーナリスト + 法務専門家

#### **テスト項目**
- [ ] **法案データ正確性**: 第217回国会法案の完全性・最新性
- [ ] **議員情報**: 衆参両院議員データの正確性・所属確認
- [ ] **委員会情報**: 委員会構成・審議スケジュール・議事録
- [ ] **CAP分類システム**: 3層階層の網羅性・分類精度
- [ ] **LLM課題抽出**: 法案から政策課題の動的抽出精度
- [ ] **中立性確認**: 政党バランス・選挙法遵守・情報源透明性

#### **検証方法**
1. **データ照合**: 国会公式サイトとの突合確認
2. **分類精度**: 手動分類とシステム分類の一致率（>85%）
3. **バイアス分析**: 政党・議員への言及頻度・トーン分析

#### **成功基準**
- データ正確率 >95%
- 分類精度 >85%
- 政党バランススコア 0.8-1.2（中立範囲）

---

### **Phase 3: ユーザビリティ・アクセシビリティ**（3日間）
**参加者**: アクセシビリティ専門家 + 一般ユーザー代表

#### **テスト項目**
- [ ] **PWA機能**: インストール・オフライン・同期・プッシュ通知
- [ ] **レスポンシブデザイン**: モバイル・タブレット・デスクトップ
- [ ] **アクセシビリティ**: WCAG 2.1 AA準拠・スクリーンリーダー対応
- [ ] **キーボードナビゲーション**: Tab順序・ショートカット・フォーカス
- [ ] **色覚多様性**: カラーパレット・コントラスト・識別可能性
- [ ] **情報設計**: 3層ナビゲーション・検索・法案詳細表示

#### **アクセシビリティチェックリスト**
- [ ] 画像にalt属性適切設定
- [ ] フォームラベル適切関連付け
- [ ] 見出し構造の論理性（h1→h2→h3）
- [ ] カラーコントラスト比 4.5:1以上
- [ ] キーボード操作のみで全機能利用可能
- [ ] ふりがな機能で専門用語読み上げ対応

#### **成功基準**
- WAVE・axe DevTools でエラー0件
- Lighthouse Accessibility スコア >90
- 実ユーザーテストでタスク完了率 >80%

---

### **Phase 4: 高負荷・パフォーマンス**（2日間）
**参加者**: インフラエンジニア + 管理者テスター

#### **テスト項目**
- [ ] **負荷耐性**: 1000ユーザー同時アクセス・API呼び出し
- [ ] **データ処理**: 大量法案データの一括処理・検索クエリ
- [ ] **Lighthouse監査**: Performance・Accessibility・SEO・PWA
- [ ] **Core Web Vitals**: LCP・FID・CLS測定・改善
- [ ] **ネットワーク**: CDN・圧縮・キャッシュ・レスポンシブ画像

#### **パフォーマンス基準**
- **Mobile First Index**: <200ms
- **Lighthouse Performance**: >90
- **Time to Interactive**: <3.5s
- **First Contentful Paint**: <1.5s
- **Largest Contentful Paint**: <2.5s

#### **負荷テストシナリオ**
1. **通常負荷**: 100並行ユーザー × 10分間
2. **スパイク負荷**: 500並行ユーザー × 5分間
3. **持続負荷**: 1000並行ユーザー × 30分間

---

### **Phase 5: セキュリティ・コンプライアンス**（2日間）
**参加者**: セキュリティ専門家 + 法務専門家

#### **テスト項目**
- [ ] **認証・認可**: JWT脆弱性・権限昇格・セッション管理
- [ ] **OWASP Top 10**: SQL注入・XSS・CSRF・不適切な認証
- [ ] **CSP設定**: Content Security Policy・XSS保護
- [ ] **HTTPS強制**: 全通信暗号化・HSTS・証明書検証
- [ ] **法的コンプライアンス**: 著作権・プライバシー・選挙法・データ保持

#### **コンプライアンスチェック**
- [ ] **著作権法Article 40**: 国会中継・議事録の適正利用
- [ ] **個人情報保護**: 最小化・匿名化・同意取得
- [ ] **選挙法**: 候補者情報中立性・寄付禁止・政治的公平性
- [ ] **データ保持**: 音声・テキストデータの保存期間・削除ポリシー

#### **セキュリティ基準**
- OWASP ZAP スキャン: High/Medium脆弱性 0件
- セキュリティヘッダースコア: A+評価
- SSL Labs テスト: A+評価

---

### **Phase 6: 統合シナリオテスト**（2日間）
**参加者**: 全関係者による総合評価

#### **ユースケーステスト**
1. **政策関心者シナリオ**
   - 特定分野（例：社会保障）の法案を検索・追跡
   - 関連する委員会審議・議事録を参照
   - 通知設定で進捗アラートを受信

2. **ジャーナリストシナリオ**
   - 複数法案の関連性を調査・可視化
   - データ分析結果をCSV・PDFで出力
   - API経由での自動データ取得・分析

3. **研究者シナリオ**
   - 時系列での政策トレンド分析
   - セマンティック検索で類似法案発見
   - 大容量データの一括エクスポート

4. **一般市民シナリオ**
   - 関心のある法案の現在状況確認
   - 分かりやすい解説・影響範囲の理解
   - スマートフォンでの快適な閲覧

#### **緊急時対応テスト**
- [ ] **データ更新遅延**: 国会データ取得障害時の代替動作
- [ ] **システム障害**: サービス部分停止時の縮退運転
- [ ] **高トラフィック**: 選挙・重要法案時のアクセス集中対応

---

## 🛠️ **テスト実行手順**

### **事前準備**（テスト開始1週間前）

#### **1. アカウント・認証情報取得**
```bash
# テストアカウント作成（開発チーム実行）
python scripts/create_test_accounts.py \
  --environment staging-external-test \
  --output external-test-credentials.json
```

受信した `external-test-credentials.json` にアクセス情報が含まれています。

#### **2. テスト環境アクセス確認**
- Frontend: https://staging-test.diet-issue-tracker.jp
- API: https://api-gateway-staging-external-test-[PROJECT].a.run.app
- ログイン: メール + JWT トークン

#### **3. テストツール準備**
- **アクセシビリティ**: WAVE・axe DevTools・スクリーンリーダー
- **パフォーマンス**: Lighthouse・WebPageTest・PageSpeed Insights
- **セキュリティ**: OWASP ZAP・SSL Labs・Security Headers

### **テスト実行中**

#### **日次報告**
各Phase終了時に以下を報告：
- 発見された問題（Critical/High/Medium/Low）
- テスト完了率・未完了項目
- 次日の予定・必要なサポート

#### **問題報告形式**
```markdown
## 問題報告 [ID: T20-YYYYMMDD-NNN]
- **発見者**: [名前・専門分野]
- **重要度**: [Critical/High/Medium/Low]  
- **Phase**: [1-6]
- **カテゴリ**: [Functionality/Performance/Accessibility/Security/Compliance]
- **再現手順**: [ステップバイステップ]
- **期待結果**: [あるべき動作]
- **実際結果**: [実際の動作・エラー]
- **環境**: [ブラウザ・OS・デバイス]
- **スクリーンショット**: [添付ファイル]
```

### **テスト完了後**

#### **最終評価レポート**
- Phase別テスト結果サマリー
- 品質基準達成状況
- 改善提案（優先度付き）
- 本番移行可否判定

#### **GO/NO-GO判定基準**
**GO（本番移行可）条件**:
- [ ] Critical問題: 0件
- [ ] High問題: <3件（対応計画あり）
- [ ] WCAG 2.1 AA準拠
- [ ] Lighthouse Performance >90
- [ ] 法的コンプライアンス要件すべて満足
- [ ] 外部専門家による品質承認

---

## 📞 **サポート・連絡先**

### **テスト期間中サポート**
- **技術的問題**: dev-team@diet-tracker.jp
- **テスト調整**: test-coordinator@diet-tracker.jp  
- **緊急対応**: support@diet-tracker.jp（24時間）

### **エスカレーション**
1. **軽微な問題**: Slack・メール報告
2. **重要な問題**: 電話 + メール報告
3. **緊急事態**: 即座に電話連絡

### **テスト期間中の営業時間**
- **平日**: 9:00-18:00（JST）
- **緊急対応**: 24時間（Critical問題のみ）

---

## 🎯 **成功指標**

### **定量指標**
- **機能要件**: 全主要機能正常動作率 100%
- **性能要件**: モバイル読み込み時間 <200ms
- **品質要件**: Lighthouse総合スコア >90
- **アクセシビリティ**: WCAG 2.1 AA準拠率 100%

### **定性指標**
- 外部専門家による総合評価 "本番準備完了"
- 一般ユーザーによる使いやすさ評価 >4.0/5.0
- 政治専門家による中立性・正確性承認
- 法務専門家による法的要件適合証明

---

**最終更新**: 2025年7月25日  
**Document Version**: 1.0  
**Next Review**: テスト開始時点