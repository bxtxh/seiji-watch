# Implementation Plan

- [ ] 1. プロジェクト分析とバックアップ作成
  - 現在のプロジェクト状態の完全な分析を実行し、リファクタリング前のバックアップを作成
  - Git commitでチェックポイントを作成し、重要なファイルの一覧を生成
  - _Requirements: 1.1, 6.1_

- [ ] 2. 一時ファイルとバックアップファイルの特定・分類
  - ingest-workerディレクトリ内の日付付きファイル（*_20250713_*.json等）を特定
  - バックアップファイル、分析結果ファイル、テスト結果ファイルを分類
  - 削除対象ファイルのリストを生成し、安全性を検証
  - _Requirements: 1.1, 1.2_

- [ ] 3. ingest-workerサービスの一時ファイル削除
  - 特定された一時ファイル・バックアップファイルを安全に削除
  - 重要な機能に影響しないことを確認してから削除を実行
  - 削除後のディレクトリ構造を検証
  - _Requirements: 1.3, 6.1_

- [ ] 4. api-gatewayサービスの重複ファイル整理
  - 複数のテストファイル（test_*.py, simple_*.py）の重複を特定
  - 重複したサーバーファイルを統合または削除
  - テスト機能を損なわずにファイル構造を整理
  - _Requirements: 4.1, 4.2_

- [ ] 5. フロントエンドサービスの統合
  - web-frontendとweb-frontend-newの機能差分を分析
  - より完全な機能を持つサービスを特定し、統合計画を作成
  - 古いフロントエンドサービスを削除し、参照を更新
  - _Requirements: 3.1, 3.2, 3.3_

- [ ] 6. テストファイル構造の改善
  - 各サービスのテストファイルを適切なディレクトリ構造に整理
  - 重複したテストケースを統合し、テストスイートを最適化
  - テストカバレッジを維持しながら実行可能なテスト環境を構築
  - _Requirements: 4.1, 4.2, 4.3_

- [ ] 7. 共有ライブラリの依存関係修正
  - pyproject.tomlファイル内のコメントアウトされた共有ライブラリ依存関係を修正
  - 各サービスから共有ライブラリへの適切なインポートを確認
  - 共有可能なコードをsharedライブラリに移動
  - _Requirements: 2.3, 5.1_

- [ ] 8. 設定ファイルとドキュメントの整理
  - 重複した設定ファイルを統合し、環境ごとの設定を適切に管理
  - 古いドキュメントファイルを整理し、最新情報を反映
  - 依存関係を更新し、互換性を確保
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 9. ディレクトリ構造の最適化
  - 各サービスのディレクトリ構造を論理的に整理
  - ソースコード、テスト、ドキュメントを適切なディレクトリに配置
  - インポートパスを更新し、モジュール構造を改善
  - _Requirements: 2.1, 2.2_

- [ ] 10. 品質保証とテスト実行
  - リファクタリング後の全サービスでビルドテストを実行
  - 既存のテストスイートを実行し、機能の回帰がないことを確認
  - コード品質チェック（lint、型チェック）を実行
  - _Requirements: 6.1, 6.2, 6.3_

- [ ] 11. CI/CDパイプラインの検証
  - GitHub Actionsワークフローが正常に動作することを確認
  - 自動デプロイメントプロセスに問題がないことを検証
  - 全ての環境（staging、production）でのビルドを確認
  - _Requirements: 6.1, 6.3_

- [ ] 12. ドキュメント整合性の検証と更新
  - docs/配下の技術仕様書とリファクタリング後のコード構造を比較検証
  - README.mdの記載内容（ディレクトリ構造、コマンド例等）を実際のコードに合わせて更新
  - docs/01-specs/technical/development-implementation-mapping.mdの実装ファイル対応を更新
  - docs/01-specs/technical/development-tickets-final.mdの進捗状況を反映
  - _Requirements: 5.2, 6.1_

- [ ] 13. 設定ファイルとスクリプトの整合性確認
  - package.jsonのworkspaces設定とactual directory構造の整合性を確認
  - pyproject.tomlの依存関係とactual import文の整合性を検証
  - docker-compose.ymlとDockerfileの設定を実際のサービス構造に合わせて更新
  - scripts/配下のデプロイメントスクリプトを更新されたサービス構造に対応
  - _Requirements: 5.1, 5.3_

- [ ] 14. 最終検証とステークホルダーレビュー
  - 全ドキュメントとコードの整合性を最終確認
  - CI/CDパイプラインでの自動チェックが全て通過することを確認
  - MVP機能が全て正常に動作することを検証
  - リファクタリング結果の要約レポートを作成
  - _Requirements: 6.1, 6.2, 6.3_